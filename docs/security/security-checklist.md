# 🔍 安全检查清单

## 📋 日常安全检查

### �� 每周检查（必须）

#### 数据库安全
- [ ] 运行 Supabase Database Linter
- [ ] 检查 RLS 策略是否正常工作
- [ ] 验证用户权限设置
- [ ] 检查是否有新的安全告警

#### 认证安全
- [ ] 检查异常登录活动
- [ ] 验证密码策略设置
- [ ] 检查 OTP 配置
- [ ] 审查用户注册趋势

#### 应用安全
- [ ] 检查依赖包安全更新
- [ ] 验证 API 访问日志
- [ ] 检查错误日志中的安全相关信息
- [ ] 验证环境变量安全性

### 🔧 每月检查（重要）

#### 权限审计
- [ ] 审查管理员账户
- [ ] 检查数据库用户权限
- [ ] 验证 API 密钥使用情况
- [ ] 审查第三方集成权限

#### 安全配置
- [ ] 检查 Supabase 项目设置
- [ ] 验证 CORS 配置
- [ ] 检查 SSL/TLS 证书状态
- [ ] 审查备份和恢复策略

### 📊 检查记录模板

```markdown
## 安全检查记录 - [日期]

**检查人员**：[姓名]
**检查时间**：[时间]
**检查类型**：[ ] 每周 [ ] 每月 [ ] 临时

### 检查结果

#### ✅ 正常项目
- 项目1：描述
- 项目2：描述

#### ⚠️ 需要关注
- 问题1：描述 + 处理计划
- 问题2：描述 + 处理计划

#### 🚨 紧急问题
- 问题：描述 + 立即处理方案

### 后续行动
- [ ] 行动1：负责人 + 截止时间
- [ ] 行动2：负责人 + 截止时间
```

## 🚨 安全事件响应

### 发现安全问题时的步骤

1. **立即评估**
   - 确定问题严重程度
   - 评估影响范围
   - 记录发现时间和方式

2. **紧急响应**
   - 如果是高危问题，立即通知团队
   - 采取临时防护措施
   - 保留相关证据

3. **问题处理**
   - 制定详细修复计划
   - 实施修复措施
   - 验证修复效果

4. **事后总结**
   - 分析问题根因
   - 更新安全策略
   - 完善预防措施

## 📚 检查工具

### 自动化检查脚本

```bash
# 数据库安全检查
supabase db lint --level error

# 依赖包安全检查
npm audit

# 环境变量检查
grep -r "password\|secret\|key" .env* || echo "环境变量检查完成"
```

### 手动检查清单

```sql
-- 检查 RLS 状态
SELECT schemaname, tablename, rowsecurity 
FROM pg_tables 
WHERE schemaname = 'public';

-- 检查用户权限
SELECT * FROM auth.users 
WHERE created_at > NOW() - INTERVAL '7 days';
```

---
*维护者：开发团队*
*最后更新：2025.5.24*